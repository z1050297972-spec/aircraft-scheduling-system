# Aircraft é¡¹ç›®æ¶æ„æ–‡æ¡£

> é£æœºè°ƒåº¦æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç³»ç»Ÿ

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

Aircraft æ˜¯ä¸€ä¸ªç”¨äºèˆªç©ºåœ°é¢ä¿éšœçš„**æµ‹è¯•ç”¨ä¾‹æ™ºèƒ½ç”Ÿæˆç³»ç»Ÿ**ï¼Œæä¾›é£æœºçŠ¶æ€ç›‘æ§ã€AI é©±åŠ¨çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆã€ç”¨ä¾‹åº“ç®¡ç†å’Œ 3D é£æœºæ¨¡å‹å¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | æè¿° |
|---------|------|
| **æ€åŠ¿ç›‘æ§** | å®æ—¶å±•ç¤ºæœºé˜ŸçŠ¶æ€ï¼Œå¿«é€Ÿå®šä½é—®é¢˜é£æœº |
| **æ™ºèƒ½ç”Ÿæˆ** | AI é©±åŠ¨çš„æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨ç”Ÿæˆ |
| **ç”¨ä¾‹åº“** | æµ‹è¯•ç”¨ä¾‹çš„å­˜å‚¨ã€æ£€ç´¢ã€ç¼–è¾‘å’Œç®¡ç† |
| **3D æ¨¡å‹** | é£æœº 3D å¯è§†åŒ–ä¸æ•…éšœéƒ¨ä»¶æ ‡æ³¨ |

---

## äºŒã€æ•´ä½“æ¶æ„

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           App.tsx                                â”‚
â”‚                    (AppProvider åŒ…è£…)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      MainLayout                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚ Sidebar  â”‚  â”‚              å†…å®¹åŒºåŸŸ                    â”‚   â”‚â”‚
â”‚  â”‚  â”‚          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚â”‚
â”‚  â”‚  â”‚ æ€åŠ¿ç›‘æ§ â”‚  â”‚  â”‚ Dashboard / Generator / Library /  â”‚â”‚   â”‚â”‚
â”‚  â”‚  â”‚ æ™ºèƒ½ç”Ÿæˆ â”‚  â”‚  â”‚ ModelViewer (3D)                   â”‚â”‚   â”‚â”‚
â”‚  â”‚  â”‚ ç”¨ä¾‹åº“   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚â”‚
â”‚  â”‚  â”‚ 3D æ¨¡å‹  â”‚  â”‚                                        â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯ç‰¹ç‚¹

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| å•é¡µåº”ç”¨ | React SPAï¼Œæ— é¡µé¢åˆ·æ–° |
| çŠ¶æ€é›†ä¸­ç®¡ç† | AppContext ç®¡ç†å…¨å±€çŠ¶æ€ |
| åŠŸèƒ½æ¨¡å—åŒ– | features/ ç›®å½•æŒ‰åŠŸèƒ½åˆ’åˆ† |
| å“åº”å¼è®¾è®¡ | æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯ |
| 3D å¯è§†åŒ– | React Three Fiber å®ç° |

---

## ä¸‰ã€æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ¡†æ¶** | React | 18.3.x | UI æ¡†æ¶ |
| **è¯­è¨€** | TypeScript | 5.7.x | ç±»å‹å®‰å…¨ |
| **æ„å»ºå·¥å…·** | Vite | 6.x | å¿«é€Ÿæ„å»º |
| **æ ·å¼** | Tailwind CSS | 3.x | åŸå­åŒ– CSS |
| **UI å›¾æ ‡** | lucide-react | latest | å›¾æ ‡åº“ |
| **å›¾è¡¨** | recharts | latest | æ•°æ®å¯è§†åŒ– |

### 3D æ¸²æŸ“

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **3D æ¡†æ¶** | React Three Fiber | 8.x | React é£æ ¼ 3D |
| **3D å·¥å…·åº“** | @react-three/drei | 9.x | å¸¸ç”¨ 3D ç»„ä»¶ |
| **3D å¼•æ“** | Three.js | 0.169.x | WebGL æ¸²æŸ“ |
| **æ¨¡å‹æ ¼å¼** | glTF 2.0 / GLB | - | 3D æ¨¡å‹æ ¼å¼ |

### ä»£ç è´¨é‡

| ç±»åˆ« | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **Linting** | ESLint | ä»£ç æ£€æŸ¥ |
| **Formatting** | Prettier | ä»£ç æ ¼å¼åŒ– |
| **Git Hooks** | Husky + lint-staged | æäº¤å‰æ£€æŸ¥ |

**å¼€å‘æœåŠ¡å™¨ç«¯å£:** 3000

---

## å››ã€ç›®å½•ç»“æ„

```
aircraft/
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ ARCHITECTURE.md               # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ models/                   # 3D æ¨¡å‹æ–‡ä»¶
â”‚       â”œâ”€â”€ boeing-737/scene.glb
â”‚       â”œâ”€â”€ airbus-a320/scene.glb
â”‚       â””â”€â”€ generic-airliner/scene.glb
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ 3D-MODEL-INTEGRATION-GUIDE.md  # çœŸå®æ•°æ®æ¥å…¥æŒ‡å—
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ main.tsx                  # åº”ç”¨å…¥å£
    â”œâ”€â”€ App.tsx                   # æ ¹ç»„ä»¶
    â”‚
    â”œâ”€â”€ components/               # å…¨å±€å…±äº«ç»„ä»¶
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â””â”€â”€ AircraftDetailModal.tsx
    â”‚
    â”œâ”€â”€ layouts/                  # å¸ƒå±€ç»„ä»¶
    â”‚   â””â”€â”€ MainLayout.tsx
    â”‚
    â”œâ”€â”€ features/                 # åŠŸèƒ½æ¨¡å— â­
    â”‚   â”œâ”€â”€ dashboard/            # æ€åŠ¿ç›‘æ§æ¨¡å—
    â”‚   â”œâ”€â”€ generator/            # æ™ºèƒ½ç”Ÿæˆæ¨¡å—
    â”‚   â”œâ”€â”€ library/              # ç”¨ä¾‹åº“æ¨¡å—
    â”‚   â””â”€â”€ model-viewer/         # 3D æ¨¡å‹æ¨¡å—
    â”‚
    â”œâ”€â”€ shared/                   # å…±äº«èµ„æº
    â”‚   â”œâ”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
    â”‚   â”œâ”€â”€ contexts/
    â”‚   â”‚   â”œâ”€â”€ index.ts
    â”‚   â”‚   â””â”€â”€ AppContext.tsx    # å…¨å±€çŠ¶æ€ç®¡ç†
    â”‚   â”œâ”€â”€ hooks/
    â”‚   â”‚   â””â”€â”€ index.ts
    â”‚   â”œâ”€â”€ utils/
    â”‚   â”‚   â”œâ”€â”€ index.ts
    â”‚   â”‚   â”œâ”€â”€ formatters.ts     # æ—¥æœŸ/æ•°å­—æ ¼å¼åŒ–
    â”‚   â”‚   â””â”€â”€ validators.ts     # è¾“å…¥éªŒè¯
    â”‚   â”œâ”€â”€ services/
    â”‚   â”‚   â”œâ”€â”€ index.ts
    â”‚   â”‚   â””â”€â”€ apiClient.ts      # API å®¢æˆ·ç«¯é…ç½®
    â”‚   â””â”€â”€ constants/
    â”‚       â”œâ”€â”€ index.ts
    â”‚       â””â”€â”€ config.ts
    â”‚
    â”œâ”€â”€ types/                    # å…¨å±€ç±»å‹å®šä¹‰
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â””â”€â”€ common.ts
    â”‚
    â””â”€â”€ data/                     # é™æ€/æ¨¡æ‹Ÿæ•°æ®
        â”œâ”€â”€ index.ts
        â””â”€â”€ mockData.ts
```

### 4.1 å…±äº«èµ„æº (Shared) è¯¦è§£

**ç›®å½•:** `src/shared/`

**å·¥å…·å‡½æ•° (utils/):**

| æ¨¡å— | å‡½æ•° | ç”¨é€” |
|------|------|------|
| **formatters.ts** | `formatDateCN(date)` | æ ¼å¼åŒ–æ—¥æœŸä¸ºä¸­æ–‡æ ¼å¼ |
| | `formatNumber(num)` | æ·»åŠ åƒä½åˆ†éš”ç¬¦ |
| | `formatPercentage(value, decimals)` | æ ¼å¼åŒ–ç™¾åˆ†æ¯” |
| **validators.ts** | `sanitizeInput(input, maxLength)` | æ¸…ç†ç”¨æˆ·è¾“å…¥ |
| | `isNotEmpty(value)` | æ£€æŸ¥éç©ºå­—ç¬¦ä¸² |
| | `isRequired(value)` | éªŒè¯å¿…å¡«å­—æ®µ |

**API å®¢æˆ·ç«¯ (services/apiClient.ts):**

```typescript
// API é…ç½®
export const API_CONFIG = {
  baseUrl: import.meta.env.VITE_API_BASE_URL || '/api',
  timeout: 30000,
};

// é€šç”¨è¯·æ±‚å°è£…
export const apiRequest = async <T>(
  endpoint: string,
  options?: RequestInit
): Promise<ApiResponse<T>>;
```

> **TODO:** åç»­æ¥å…¥è‡ªç ”å¤§æ¨¡å‹åç«¯æ—¶ï¼Œåœ¨æ­¤é…ç½® API åŸºç¡€è®¾ç½®

---

## äº”ã€åŠŸèƒ½æ¨¡å—è¯¦è§£

### 5.1 æ€åŠ¿ç›‘æ§ (Dashboard)

**ç›®å½•:** `src/features/dashboard/`

**åŠŸèƒ½æè¿°:**
- ä»¥ç½‘æ ¼å½¢å¼å±•ç¤ºæœºé˜Ÿä¸­æ‰€æœ‰é£æœºçš„çŠ¶æ€
- æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆæ­£å¸¸ã€è­¦å‘Šã€æ•…éšœã€ç»´æŠ¤ä¸­ï¼‰
- ç‚¹å‡»é£æœºå¡ç‰‡æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å¼¹çª—
- å“åº”å¼å¸ƒå±€ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸

**æ–‡ä»¶ç»“æ„:**
```
features/dashboard/
â”œâ”€â”€ AircraftGrid.tsx      # é£æœºç½‘æ ¼å±•ç¤ºç»„ä»¶
â”œâ”€â”€ Sidebar.tsx           # æ¡Œé¢ç«¯ä¾§è¾¹æ å¯¼èˆª
â”œâ”€â”€ MobileDrawer.tsx      # ç§»åŠ¨ç«¯æŠ½å±‰å¼å¯¼èˆª
â””â”€â”€ LoginView.tsx         # ç™»å½•é¡µé¢
```

**æ ¸å¿ƒç»„ä»¶:**

| ç»„ä»¶ | èŒè´£ |
|------|------|
| **AircraftGrid** | æ¸²æŸ“é£æœºå¡ç‰‡ç½‘æ ¼ï¼Œæ”¯æŒçŠ¶æ€ç­›é€‰å’Œæœç´¢ |
| **Sidebar** | æ¡Œé¢ç«¯å›ºå®šä¾§è¾¹æ ï¼ŒåŒ…å«å¯¼èˆªèœå•å’Œç”¨æˆ·ä¿¡æ¯ |
| **MobileDrawer** | ç§»åŠ¨ç«¯æ»‘å‡ºå¼å¯¼èˆªæŠ½å±‰ |
| **LoginView** | ç”¨æˆ·ç™»å½•ç•Œé¢ï¼ŒåŒ…å«ç”¨æˆ·å/å¯†ç è¡¨å• |

**æ•°æ®æµ:**
```
MOCK_AIRCRAFT (æ¨¡æ‹Ÿæ•°æ®)
       â”‚
       â–¼
AircraftGrid
       â”‚
       â”œâ”€â”€ æ¸²æŸ“é£æœºå¡ç‰‡åˆ—è¡¨
       â”‚
       â””â”€â”€ ç‚¹å‡»å¡ç‰‡ â†’ æ‰“å¼€ AircraftDetailModal
```

---

### 5.2 æ™ºèƒ½ç”Ÿæˆ (Generator)

**ç›®å½•:** `src/features/generator/`

**åŠŸèƒ½æè¿°:**
- ç”¨æˆ·è¾“å…¥æµ‹è¯•éœ€æ±‚æè¿°ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰
- AI æ¨¡å‹åˆ†æéœ€æ±‚å¹¶ç”Ÿæˆæµ‹è¯•åœºæ™¯
- æ”¯æŒé€‰æ‹©å…³è”é£æœºè¿›è¡Œé’ˆå¯¹æ€§æµ‹è¯•
- ç”Ÿæˆè¿‡ç¨‹åŒ…å« 4 é˜¶æ®µåŠ è½½åŠ¨ç”»åé¦ˆ
- å¯é¢„è§ˆã€ç¼–è¾‘å’Œä¿å­˜ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹

**æ–‡ä»¶ç»“æ„:**
```
features/generator/
â”œâ”€â”€ index.ts                        # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ TestCaseGenerator.tsx           # ç”Ÿæˆå™¨ä¸»ç»„ä»¶
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ GeneratorInputPanel.tsx     # å·¦ä¾§è¾“å…¥é¢æ¿
â”‚   â””â”€â”€ GeneratorResultPanel.tsx    # å³ä¾§ç»“æœé¢æ¿
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ useGenerator.ts             # ç”Ÿæˆå™¨çŠ¶æ€ç®¡ç† Hook
â””â”€â”€ services/
    â”œâ”€â”€ index.ts
    â””â”€â”€ generatorApi.ts             # AI æ¥å£å±‚ï¼ˆé¢„ç•™åç«¯æ¥å…¥ï¼‰
```

**æ ¸å¿ƒç»„ä»¶:**

| ç»„ä»¶ | èŒè´£ |
|------|------|
| **TestCaseGenerator** | ç”Ÿæˆå™¨å®¹å™¨ï¼Œåè°ƒè¾“å…¥å’Œè¾“å‡º |
| **GeneratorInputPanel** | éœ€æ±‚è¾“å…¥åŒºåŸŸï¼ŒåŒ…å«æ–‡æœ¬æ¡†å’Œé£æœºé€‰æ‹©å™¨ |
| **GeneratorResultPanel** | ç»“æœå±•ç¤ºåŒºåŸŸï¼Œæ˜¾ç¤ºç”Ÿæˆçš„åœºæ™¯å’Œä»»åŠ¡ |

**æ ¸å¿ƒ Hook:**

```typescript
// useGenerator.ts
interface UseGeneratorReturn {
  userInput: string;                    // ç”¨æˆ·è¾“å…¥æ–‡æœ¬
  setUserInput: (input: string) => void;
  selectedAircraftIds: string[];        // é€‰ä¸­çš„é£æœº ID
  toggleAircraftSelection: (id: string) => void;
  isGenerating: boolean;                // ç”Ÿæˆä¸­çŠ¶æ€
  loadingStep: number;                  // å½“å‰åŠ è½½é˜¶æ®µ (0-3)
  loadingTexts: string[];               // åŠ è½½é˜¶æ®µæè¿°æ–‡æœ¬
  scenario: GeneratedScenario | null;   // ç”Ÿæˆç»“æœ
  hasSaved: boolean;                    // å·²ä¿å­˜æ ‡è®°
  handleGenerate: () => Promise<void>;  // è§¦å‘ç”Ÿæˆ
  handleSaveClick: () => void;          // ä¿å­˜åˆ°ç”¨ä¾‹åº“
}
```

**API æœåŠ¡å±‚:**

```typescript
// services/generatorApi.ts
// TODO: åç»­æ¥å…¥è‡ªç ”å¤§æ¨¡å‹åç«¯ API

// ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
export const generateTestCase = async (
  userInput: string,
  aircraftList: Aircraft[]
): Promise<GeneratedScenario | null>;

// AI ä¼˜åŒ–éœ€æ±‚æè¿°
export const optimizeScenarioDescription = async (
  input: string
): Promise<string>;
```

**åŠ è½½åŠ¨ç”»é˜¶æ®µ:**

| é˜¶æ®µ | æ˜¾ç¤ºæ–‡æœ¬ |
|------|----------|
| 0 | æ­£åœ¨åˆ†ææ€åŠ¿æ„ŸçŸ¥æ•°æ®... |
| 1 | æ­£åœ¨æ£€ç´¢å¯ç”¨ä¿éšœèµ„æº... |
| 2 | æ­£åœ¨æ¨æ¼”æœ€ä¼˜è°ƒåº¦è·¯å¾„... |
| 3 | æ­£åœ¨ç”Ÿæˆä»¿çœŸè¯„ä¼°æŠ¥å‘Š... |

**æ•°æ®æµ:**
```
ç”¨æˆ·è¾“å…¥éœ€æ±‚ + é€‰æ‹©é£æœº
       â”‚
       â–¼
GeneratorInputPanel
       â”‚
       â–¼
useGenerator.handleGenerate()
       â”‚
       â–¼
generatorApi.generateTestCase()  â† TODO: æ¥å…¥åç«¯
       â”‚
       â–¼
GeneratedScenario
       â”‚
       â–¼
GeneratorResultPanel
       â”‚
       â””â”€â”€ handleSaveClick() â†’ AppContext.saveTestCase()
```

**ç”Ÿæˆç»“æœç±»å‹:**
```typescript
interface GeneratedScenario {
  scenarioName: string;        // åœºæ™¯åç§°
  tasks: GeneratedTask[];      // ä»»åŠ¡åˆ—è¡¨
  predictedOutcome: {          // é¢„æµ‹ç»“æœ
    isComplete: boolean;
    totalTime: number;
    score: number;
    grade: string;
    logs: string[];
    resourceUsage: ResourceUsage[];
  };
}

interface GeneratedTask {
  id: string;
  aircraftId: string;          // å…³è”é£æœº
  type: string;                // ä»»åŠ¡ç±»å‹
  description: string;         // ä»»åŠ¡æè¿°
  requiredResources: string;   // æ‰€éœ€èµ„æº
  estimatedDuration: number;   // é¢„è®¡æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
}
```

---

### 5.3 ç”¨ä¾‹åº“ (Library)

**ç›®å½•:** `src/features/library/`

**åŠŸèƒ½æè¿°:**
- å±•ç¤ºæ‰€æœ‰å·²ä¿å­˜çš„æµ‹è¯•ç”¨ä¾‹
- æ”¯æŒæœç´¢ã€ç­›é€‰å’Œæ’åº
- åˆ›å»ºæ–°ç”¨ä¾‹ï¼ˆæ‰‹åŠ¨æˆ–ä»éœ€æ±‚ç”Ÿæˆï¼‰
- ç¼–è¾‘ã€åˆ é™¤å’ŒåŠ è½½å·²æœ‰ç”¨ä¾‹
- æ ‡ç­¾ç³»ç»Ÿæ–¹ä¾¿åˆ†ç±»ç®¡ç†

**æ–‡ä»¶ç»“æ„:**
```
features/library/
â”œâ”€â”€ TestCaseLibrary.tsx             # ç”¨ä¾‹åº“ä¸»ç»„ä»¶
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useCaseModal.ts             # å¼¹çª—çŠ¶æ€ç®¡ç†
â””â”€â”€ components/
    â”œâ”€â”€ LibraryHeader.tsx           # é¡¶éƒ¨æœç´¢å’Œæ“ä½œæ 
    â”œâ”€â”€ CaseCard.tsx                # ç”¨ä¾‹å¡ç‰‡ç»„ä»¶
    â””â”€â”€ CaseModals.tsx              # åˆ›å»º/ç¼–è¾‘å¼¹çª—
```

**æ ¸å¿ƒç»„ä»¶:**

| ç»„ä»¶ | èŒè´£ |
|------|------|
| **TestCaseLibrary** | ç”¨ä¾‹åº“å®¹å™¨ï¼Œç®¡ç†åˆ—è¡¨å’Œæ“ä½œ |
| **LibraryHeader** | æœç´¢æ¡†ã€ç­›é€‰å™¨å’Œ"æ–°å»º"æŒ‰é’® |
| **CaseCard** | å•ä¸ªç”¨ä¾‹å¡ç‰‡ï¼Œæ˜¾ç¤ºåç§°ã€æ ‡ç­¾ã€åˆ›å»ºæ—¶é—´ |
| **CreateCaseModal** | æ–°å»ºç”¨ä¾‹å¼¹çª—ï¼Œæ”¯æŒéœ€æ±‚è¾“å…¥å’Œ AI ä¼˜åŒ– |
| **EditCaseModal** | ç¼–è¾‘ç”¨ä¾‹å¼¹çª—ï¼Œä¿®æ”¹åç§°å’Œæ ‡ç­¾ |

**æ ¸å¿ƒ Hook:**
```typescript
// useCaseModal.ts
interface UseCaseModalReturn {
  // åˆ›å»ºå¼¹çª—çŠ¶æ€
  isCreateModalOpen: boolean;
  setIsCreateModalOpen: (open: boolean) => void;
  createName: string;
  createTags: string;
  createRequirement: string;
  isOptimizing: boolean;
  handleOptimize: () => Promise<void>;
  handleCreateCase: (onNavigate: (prompt: string) => void) => void;

  // ç¼–è¾‘å¼¹çª—çŠ¶æ€
  editingCase: SavedTestCase | null;
  editName: string;
  editTags: string;
  handleOpenEditModal: (testCase: SavedTestCase) => void;
  handleCloseEditModal: () => void;
  handleSaveEditCase: (updateFn: (updated: SavedTestCase) => void) => void;
}
```

**æ•°æ®æµ:**
```
AppContext.savedCases
       â”‚
       â–¼
TestCaseLibrary
       â”‚
       â”œâ”€â”€ LibraryHeader (æœç´¢/ç­›é€‰)
       â”‚
       â”œâ”€â”€ CaseCard[] (åˆ—è¡¨æ¸²æŸ“)
       â”‚       â”‚
       â”‚       â”œâ”€â”€ åŠ è½½ â†’ è·³è½¬ Generator å¹¶é¢„å¡«å……
       â”‚       â”œâ”€â”€ ç¼–è¾‘ â†’ æ‰“å¼€ EditCaseModal
       â”‚       â””â”€â”€ åˆ é™¤ â†’ AppContext.deleteTestCase()
       â”‚
       â””â”€â”€ CreateCaseModal
               â”‚
               â””â”€â”€ åˆ›å»º â†’ è·³è½¬ Generator
```

---

### 5.4 3D æ¨¡å‹æŸ¥çœ‹å™¨ (Model Viewer)

**ç›®å½•:** `src/features/model-viewer/`

**åŠŸèƒ½æè¿°:**
- 3D é£æœºæ¨¡å‹å¯è§†åŒ–å±•ç¤º
- æ”¯æŒå¤šæœºå‹åˆ‡æ¢ï¼ˆä¸‹æ‹‰é€‰æ‹©ï¼‰
- ç‚¹å‡»éƒ¨ä»¶ç²¾ç¡®è¯†åˆ«ï¼ˆåŸºäº Mesh åç§°ï¼‰
- é€‰ä¸­éƒ¨ä»¶é«˜äº®å‘å…‰ï¼Œå…¶ä»–éƒ¨ä»¶é€æ˜
- æ˜¾ç¤ºéƒ¨ä»¶æ•…éšœçŠ¶æ€å’Œè¯¦ç»†ä¿¡æ¯
- çº¿æ¡†è§†å›¾å’Œæ ‡ç­¾è§†å›¾å¯åˆ‡æ¢
- é¢œè‰²ç¼–ç æ˜¾ç¤ºå¥åº·çŠ¶æ€ï¼ˆç»¿/é»„/çº¢/è“ï¼‰
- å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒè§¦æ‘¸æ§åˆ¶

**æ–‡ä»¶ç»“æ„:**
```
features/model-viewer/
â”œâ”€â”€ index.ts                        # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ ModelViewerPage.tsx             # é¡µé¢ä¸»ç»„ä»¶
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ AircraftScene.tsx           # 3D åœºæ™¯å®¹å™¨
â”‚   â”œâ”€â”€ AircraftModel.tsx           # é£æœºæ¨¡å‹ç»„ä»¶
â”‚   â”œâ”€â”€ MeshOverlay.tsx             # çº¿æ¡†å’Œæ ‡ç­¾è¦†ç›–å±‚
â”‚   â”œâ”€â”€ ModelSelector.tsx           # æœºå‹é€‰æ‹©å™¨
â”‚   â”œâ”€â”€ PartInfoPanel.tsx           # æ•…éšœè¯¦æƒ…é¢æ¿
â”‚   â”œâ”€â”€ LoadingProgress.tsx         # åŠ è½½è¿›åº¦æŒ‡ç¤ºå™¨
â”‚   â””â”€â”€ RegionHighlight.tsx         # åŒºåŸŸé«˜äº®ï¼ˆæ—§æ–¹æ¡ˆï¼‰
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ usePartSelection.ts         # éƒ¨ä»¶é€‰æ‹©çŠ¶æ€
â”‚   â””â”€â”€ usePartStatus.ts            # éƒ¨ä»¶å¥åº·çŠ¶æ€
â”‚
â””â”€â”€ data/
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ modelRegistry.ts            # æœºå‹æ³¨å†Œè¡¨
    â”œâ”€â”€ meshMapping.ts              # Meshâ†’éƒ¨ä»¶æ˜ å°„
    â”œâ”€â”€ mockPartStatus.ts           # æ¨¡æ‹Ÿæ•…éšœæ•°æ®
    â””â”€â”€ partRegions.ts              # è¾¹ç•Œæ¡†å®šä¹‰ï¼ˆæ—§æ–¹æ¡ˆï¼‰
```

**æ ¸å¿ƒç»„ä»¶:**

| ç»„ä»¶ | èŒè´£ |
|------|------|
| **ModelViewerPage** | é¡µé¢å®¹å™¨ï¼ŒçŠ¶æ€ç®¡ç†ï¼ŒUI å¸ƒå±€ |
| **AircraftScene** | 3D Canvas å®¹å™¨ï¼Œç¯å…‰ã€ç¯å¢ƒã€æ§åˆ¶å™¨ |
| **AircraftModel** | æ¨¡å‹åŠ è½½ã€ç‚¹å‡»æ£€æµ‹ã€é«˜äº®æ•ˆæœ |
| **MeshOverlay** | çº¿æ¡†æ¸²æŸ“ã€éƒ¨ä»¶æ ‡ç­¾ |
| **PartInfoPanel** | å³ä¾§æ•…éšœä¿¡æ¯é¢æ¿ |
| **ModelSelector** | æœºå‹ä¸‹æ‹‰é€‰æ‹©å™¨ |

**æ ¸å¿ƒ Hooks:**

| Hook | èŒè´£ |
|------|------|
| **usePartSelection** | ç®¡ç†é€‰ä¸­éƒ¨ä»¶ ID å’Œä¿¡æ¯ |
| **usePartStatus** | æŸ¥è¯¢éƒ¨ä»¶å¥åº·çŠ¶æ€ |

**Mesh ä¸ Part çš„å…³ç³»:**
```
                1å·å‘åŠ¨æœº (Part)
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚
engine_body     Blades003        Cone003
  (Mesh)          (Mesh)          (Mesh)
```

**éƒ¨ä»¶æ˜ å°„é…ç½®:**
```typescript
// meshMapping.ts
export const PART_MAPPINGS: PartMapping[] = [
  {
    id: 'engine-1',
    name: '1å·å‘åŠ¨æœº',
    category: 'engine',
    meshPatterns: ['eng1_', 'Blades003', 'engine_body_0003', ...],
  },
  // ... å…± 18 ä¸ªéƒ¨ä»¶å®šä¹‰
];
```

**å®Œæ•´éƒ¨ä»¶åˆ—è¡¨:**

| éƒ¨ä»¶ ID | åç§° | ç±»åˆ« | Mesh æ¨¡å¼ç¤ºä¾‹ |
|---------|------|------|---------------|
| cockpit | é©¾é©¶èˆ± | cockpit | cockpit, nosecone, RHwiper |
| fuselage | æœºèº« | fuselage | fuselage, lav, cargodoor |
| wing-left | å·¦æœºç¿¼ | wing | wing_left, winglet_left |
| wing-right | å³æœºç¿¼ | wing | wing_right, winglet_right |
| flap-left | å·¦è¥Ÿç¿¼ | wing | flap_left |
| flap-right | å³è¥Ÿç¿¼ | wing | flap_right |
| aileron-left | å·¦å‰¯ç¿¼ | wing | aileron_left |
| aileron-right | å³å‰¯ç¿¼ | wing | aileron_right |
| speedbrake-left | å·¦æ‰°æµæ¿ | wing | speedbrake_left |
| speedbrake-right | å³æ‰°æµæ¿ | wing | speedbrake_right |
| engine-1 | 1å·å‘åŠ¨æœº | engine | eng1_, Blades003, Cone003 |
| engine-2 | 2å·å‘åŠ¨æœº | engine | eng2_, Blades002, Cone002 |
| engine-3 | 3å·å‘åŠ¨æœº | engine | eng3_, Blades001, Cone001 |
| engine-4 | 4å·å‘åŠ¨æœº | engine | eng4_, Blades, Cone |
| tail-vertical | å‚ç›´å°¾ç¿¼ | tail | vstab, rudder |
| tail-horizontal | æ°´å¹³å°¾ç¿¼ | tail | hstab, elevator |
| landing-gear-nose | å‰èµ·è½æ¶ | landing-gear | nlg_ |
| landing-gear-main | ä¸»èµ·è½æ¶ | landing-gear | wlg_ |

**MeshOverlay ç»„ä»¶:**

è´Ÿè´£åœ¨ 3D æ¨¡å‹ä¸Šæ¸²æŸ“å¯è§†åŒ–è¦†ç›–å±‚ï¼š

```typescript
interface MeshOverlayProps {
  scene: THREE.Object3D;       // 3D åœºæ™¯å¯¹è±¡
  showWireframe: boolean;      // æ˜¯å¦æ˜¾ç¤ºçº¿æ¡†
  showLabels: boolean;         // æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾
  getPartStatus: (partId: string) => PartStatus | null;
}
```

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **çº¿æ¡†æ¸²æŸ“** | ä½¿ç”¨ EdgesGeometry ç”Ÿæˆè¾¹ç¼˜çº¿ï¼Œé¢œè‰²æ ¹æ®å¥åº·çŠ¶æ€å˜åŒ– |
| **éƒ¨ä»¶æ ‡ç­¾** | ä½¿ç”¨ @react-three/drei çš„ Html ç»„ä»¶åœ¨ 3D ç©ºé—´ä¸­æ˜¾ç¤ºæ ‡ç­¾ |
| **é¢œè‰²ç¼–ç ** | æ ¹æ® PartStatus åŠ¨æ€è®¾ç½®é¢œè‰²ï¼ˆæ­£å¸¸ç»¿/è­¦å‘Šé»„/æ•…éšœçº¢/ç»´æŠ¤è“ï¼‰ |

**å¥åº·çŠ¶æ€é¢œè‰²:**

| çŠ¶æ€ | é¢œè‰² | å«ä¹‰ |
|------|------|------|
| normal | ğŸŸ¢ ç»¿è‰² | æ­£å¸¸è¿è¡Œ |
| warning | ğŸŸ¡ ç¥ç€è‰² | éœ€è¦å…³æ³¨ |
| error | ğŸ”´ çº¢è‰² | éœ€è¦ç»´ä¿® |
| maintenance | ğŸ”µ è“è‰² | ç»´æŠ¤ä¸­ |

**æ•°æ®æµ:**
```
ç”¨æˆ·ç‚¹å‡»é£æœºæ¨¡å‹
       â”‚
       â–¼
AircraftModel.handleClick(event)
       â”‚
       â–¼
event.object.name â†’ "engine_body_0003"
       â”‚
       â–¼
meshMapping.findPartByMeshName()
       â”‚
       â–¼
åŒ¹é…éƒ¨ä»¶ â†’ { id: "engine-1", name: "1å·å‘åŠ¨æœº" }
       â”‚
       â–¼
onPartClick(partId, partName)
       â”‚
       â–¼
usePartSelection.selectPart()
       â”‚
       â”œâ”€â”€â†’ æ›´æ–° selectedPartId
       â”‚
       â””â”€â”€â†’ è§¦å‘é«˜äº®æ•ˆæœ
            â”‚
            â”œâ”€â”€ é€‰ä¸­éƒ¨ä»¶: emissive å‘å…‰
            â””â”€â”€ å…¶ä»–éƒ¨ä»¶: opacity é€æ˜
```

---

## å…­ã€æ•°æ®æµè®¾è®¡

### å…¨å±€çŠ¶æ€ (AppContext)

```typescript
interface AppContextValue {
  // è§†å›¾çŠ¶æ€
  view: ViewState;
  setView: (view: ViewState) => void;

  // è®¤è¯çŠ¶æ€
  username: string;
  setUsername: (name: string) => void;
  password: string;
  setPassword: (pass: string) => void;
  isAuthenticated: boolean;
  login: (username: string, password: string) => boolean;
  logout: () => void;

  // æµ‹è¯•ç”¨ä¾‹çŠ¶æ€
  savedCases: SavedTestCase[];
  saveTestCase: (scenario: GeneratedScenario) => void;
  deleteTestCase: (id: string) => void;
  updateTestCase: (updatedCase: SavedTestCase) => void;

  // å¯¼èˆªçŠ¶æ€
  currentScenario: GeneratedScenario | null;
  setCurrentScenario: (scenario: GeneratedScenario | null) => void;
  initialPrompt: string;
  setInitialPrompt: (prompt: string) => void;

  // ç§»åŠ¨ç«¯èœå•
  isMobileMenuOpen: boolean;
  setIsMobileMenuOpen: (isOpen: boolean) => void;
}
```

### çŠ¶æ€æµè½¬å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AppContext                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   è§†å›¾çŠ¶æ€    â”‚  â”‚   è®¤è¯çŠ¶æ€    â”‚  â”‚     ç”¨ä¾‹çŠ¶æ€          â”‚  â”‚
â”‚  â”‚  view        â”‚  â”‚  username    â”‚  â”‚  savedCases          â”‚  â”‚
â”‚  â”‚  setView     â”‚  â”‚  password    â”‚  â”‚  saveTestCase        â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  login       â”‚  â”‚  deleteTestCase      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  logout      â”‚  â”‚  updateTestCase      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MainLayout    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                    â–¼                    â–¼
   Dashboard            Generator             Library
   (åªè¯»å±•ç¤º)           (ç”Ÿæˆ+ä¿å­˜)          (CRUD æ“ä½œ)
```

---

## ä¸ƒã€ç»„ä»¶èŒè´£åˆ’åˆ†

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **App** | `App.tsx` | æ ¹ç»„ä»¶ï¼ŒAppProvider åŒ…è£… |
| **AppContext** | `shared/contexts/AppContext.tsx` | å…¨å±€çŠ¶æ€ç®¡ç† |
| **MainLayout** | `layouts/MainLayout.tsx` | ä¸»å¸ƒå±€ï¼Œè§†å›¾è·¯ç”± |

### å…±äº«ç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **AircraftDetailModal** | `components/AircraftDetailModal.tsx` | é£æœºè¯¦æƒ…å¼¹çª— |

### åŠŸèƒ½æ¨¡å—ç»„ä»¶

è§å„åŠŸèƒ½æ¨¡å—è¯¦è§£ç« èŠ‚ã€‚

---

## å…«ã€å…³é”®æ–‡ä»¶å…³ç³»å›¾

```
App.tsx
    â”‚
    â””â”€â†’ AppProvider (AppContext.tsx)
            â”‚
            â””â”€â†’ AppContent
                    â”‚
                    â”œâ”€â†’ LoginView (æœªç™»å½•)
                    â”‚       â””â”€â”€ ç™»å½•è¡¨å• â†’ login()
                    â”‚
                    â””â”€â†’ MainLayout (å·²ç™»å½•)
                            â”‚
                            â”œâ”€â†’ Sidebar / MobileDrawer
                            â”‚       â””â”€â”€ å¯¼èˆªèœå• â†’ setView()
                            â”‚
                            â””â”€â†’ è§†å›¾å†…å®¹ (æ ¹æ® view åˆ‡æ¢)
                                â”‚
                                â”œâ”€â†’ Dashboard
                                â”‚       â””â”€â”€ AircraftGrid
                                â”‚               â””â”€â”€ AircraftDetailModal
                                â”‚
                                â”œâ”€â†’ Generator
                                â”‚       â”œâ”€â”€ GeneratorInputPanel
                                â”‚       â””â”€â”€ GeneratorResultPanel
                                â”‚               â””â”€â”€ saveTestCase()
                                â”‚
                                â”œâ”€â†’ Library
                                â”‚       â”œâ”€â”€ LibraryHeader
                                â”‚       â”œâ”€â”€ CaseCard[]
                                â”‚       â”œâ”€â”€ CreateCaseModal
                                â”‚       â””â”€â”€ EditCaseModal
                                â”‚
                                â””â”€â†’ ModelViewer
                                        â”œâ”€â”€ ModelSelector
                                        â”œâ”€â”€ AircraftScene
                                        â”‚       â””â”€â”€ AircraftModel
                                        â”‚               â””â”€â”€ MeshOverlay
                                        â””â”€â”€ PartInfoPanel
```

---

## ä¹ã€ç±»å‹å®šä¹‰

### è§†å›¾ç±»å‹

```typescript
type ViewState = 'login' | 'dashboard' | 'generator' | 'library' | 'model-viewer';
```

### é£æœºç±»å‹

```typescript
interface Aircraft {
  id: string;
  model: string;
  registration: string;
  status: 'normal' | 'warning' | 'error' | 'maintenance';
  location: string;
  lastCheck: string;
  nextMaintenance: string;
  flightHours: number;
  fuelLevel: number;
}
```

### æµ‹è¯•ç”¨ä¾‹ç±»å‹

```typescript
interface SavedTestCase extends GeneratedScenario {
  id: string;
  createdAt: string;
  tags: string[];
}

interface GeneratedScenario {
  scenarioName: string;
  description: string;
  tasks: GeneratedTask[];
  constraints?: string[];
  expectedOutcome?: string;
}

interface GeneratedTask {
  id: string;
  aircraftId: string;
  taskType: string;
  priority: 'high' | 'medium' | 'low';
  duration: number;
  dependencies?: string[];
  steps: TaskStep[];
}
```

### 3D æ¨¡å‹ç±»å‹

```typescript
interface AircraftModelType {
  id: string;
  name: string;
  modelPath: string;
  thumbnailPath?: string;
  parts: PartDefinition[];
}

interface PartDefinition {
  id: string;
  name: string;
  meshNames: string[];
  category: PartCategory;
}

type PartCategory = 'engine' | 'wing' | 'fuselage' | 'tail' | 'landing-gear' | 'cockpit' | 'other';

interface PartStatus {
  partId: string;
  status: 'normal' | 'warning' | 'error' | 'maintenance';
  faults: FaultInfo[];
}

interface FaultInfo {
  id: string;
  type: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  description: string;
  detectedAt: string;
  recommendation?: string;
}
```

---

## åã€å¼€å‘å‘½ä»¤

```bash
npm run dev       # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 3000)
npm run build     # ç”Ÿäº§æ„å»º
npm run preview   # é¢„è§ˆæ„å»ºç»“æœ
npm run lint      # ESLint æ£€æŸ¥
npm run lint:fix  # ESLint è‡ªåŠ¨ä¿®å¤
npm run format    # Prettier æ ¼å¼åŒ–
npm run typecheck # TypeScript ç±»å‹æ£€æŸ¥
```

---

## åä¸€ã€åç»­å¼€å‘æŒ‡å—

### æ¥å…¥çœŸå®åç«¯

æœ¬é¡¹ç›®é¢„ç•™äº†å®Œæ•´çš„åç«¯æ¥å…¥æ¶æ„ï¼Œä¸»è¦æ¶‰åŠä»¥ä¸‹æ–‡ä»¶ï¼š

#### AI æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆåç«¯

| æ–‡ä»¶ | å½“å‰çŠ¶æ€ | æ¥å…¥åç«¯éœ€ä¿®æ”¹å†…å®¹ |
|------|----------|-------------------|
| `features/generator/services/generatorApi.ts` | æ¨¡æ‹Ÿæ•°æ® | æ›¿æ¢ä¸ºå®é™… API è°ƒç”¨ |
| `features/library/hooks/useCaseModal.ts` | æ¨¡æ‹Ÿä¼˜åŒ– | æ¥å…¥ AI ä¼˜åŒ–æ¥å£ |
| `shared/services/apiClient.ts` | åŸºç¡€é…ç½® | é…ç½®è®¤è¯å¤´ã€é”™è¯¯å¤„ç† |

**ç¯å¢ƒå˜é‡é…ç½®:**
```bash
# .env.local
VITE_API_BASE_URL=https://your-backend-api.com/api
```

#### 3D æ¨¡å‹æ•…éšœæ•°æ®åç«¯

è¯¦è§ `docs/3D-MODEL-INTEGRATION-GUIDE.md`

| æ–‡ä»¶ | å½“å‰çŠ¶æ€ | æ¥å…¥åç«¯éœ€ä¿®æ”¹å†…å®¹ |
|------|----------|-------------------|
| `features/model-viewer/data/mockPartStatus.ts` | æ¨¡æ‹Ÿæ•…éšœæ•°æ® | åˆ é™¤ï¼Œæ”¹ç”¨ API |
| `features/model-viewer/hooks/usePartStatus.ts` | é™æ€æ•°æ®æŸ¥è¯¢ | æ”¹ä¸ºå¼‚æ­¥ API è°ƒç”¨ |
| `features/model-viewer/data/modelRegistry.ts` | é™æ€æœºå‹åˆ—è¡¨ | å¯æ”¹ä¸ºåŠ¨æ€è·å– |

### æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—

1. åœ¨ `src/features/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. éµå¾ªç°æœ‰æ¨¡å—ç»“æ„ï¼ˆindex.tsã€ä¸»ç»„ä»¶ã€components/ã€hooks/ï¼‰
3. åœ¨ `types/common.ts` ä¸­æ·»åŠ æ–°çš„ ViewState
4. åœ¨ `MainLayout.tsx` ä¸­æ·»åŠ è·¯ç”±æ¸²æŸ“
5. åœ¨ Sidebar ä¸­æ·»åŠ å¯¼èˆªé¡¹

### æ¨¡å‹æ›¿æ¢æŒ‡å—

1. å‡†å¤‡ glTF 2.0 / GLB æ ¼å¼æ¨¡å‹
2. ç¡®ä¿æ¨¡å‹å·²æŒ‰éƒ¨ä»¶åˆ†å‰² Mesh
3. æ›´æ–° `modelRegistry.ts` æœºå‹é…ç½®
4. æ›´æ–° `meshMapping.ts` Mesh æ˜ å°„
5. æµ‹è¯•ç‚¹å‡»æ£€æµ‹æ˜¯å¦å‡†ç¡®

---

## åäºŒã€3D æ¨¡å‹èµ„æº

### å½“å‰æ¨¡å‹æ¥æº

| æœºå‹ | æ¥æº | è®¸å¯è¯ |
|------|------|--------|
| Boeing 747 | [FlightAirMap-3dmodels](https://github.com/Ysurac/FlightAirMap-3dmodels) | MIT |
| Airbus A320 | FlightAirMap-3dmodels | MIT |
| Boeing 787 | FlightAirMap-3dmodels | MIT |

### æ¨¡å‹æ ¼å¼è¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| æ ¼å¼ | glTF 2.0 / GLB |
| Mesh åˆ†å‰² | æ¯ä¸ªå¯äº¤äº’éƒ¨ä»¶åº”ä¸ºç‹¬ç«‹ Mesh |
| Mesh å‘½å | éœ€æœ‰æ„ä¹‰çš„å‘½åï¼ˆå¦‚ engine_left, wing_rightï¼‰ |
| æè´¨ | æ”¯æŒ PBR æè´¨ |
| æ–‡ä»¶å¤§å° | å»ºè®® < 50MBï¼ˆä¼˜åŒ–åï¼‰ |

### è·å– Mesh åç§°

åŠ è½½æ–°æ¨¡å‹åï¼Œæ§åˆ¶å°ä¼šè‡ªåŠ¨è¾“å‡ºï¼š
```
=== æ¨¡å‹ä¿¡æ¯ ===
æ¨¡å‹è·¯å¾„: /models/xxx/scene.glb
Mesh æ•°é‡: 175
å°ºå¯¸ (x, y, z): [50.23, 15.67, 48.91]
================
```

ç‚¹å‡»æ¨¡å‹æ—¶ä¼šè¾“å‡ºï¼š
```
--- ç‚¹å‡» Mesh ---
Mesh åç§°: engine_body_0003
åŒ¹é…éƒ¨ä»¶: 1å·å‘åŠ¨æœº (engine-1)
```

---

## åä¸‰ã€æ€§èƒ½ä¼˜åŒ–

### 3D æ¸²æŸ“ä¼˜åŒ–

| ä¼˜åŒ–é¡¹ | å®ç°æ–¹å¼ |
|--------|----------|
| æè´¨å¤ç”¨ | å…‹éš†æè´¨é¿å…å…±äº«é—®é¢˜ |
| æ‡’åŠ è½½ | useGLTF è‡ªåŠ¨å¤„ç† |
| è¿›åº¦æŒ‡ç¤º | LoadingProgress ç»„ä»¶ |
| æŒ‰éœ€æ¸²æŸ“ | MeshOverlay ä»…åœ¨å¯ç”¨æ—¶æ¸²æŸ“ |

### React æ€§èƒ½

| ä¼˜åŒ–é¡¹ | å®ç°æ–¹å¼ |
|--------|----------|
| çŠ¶æ€éš”ç¦» | åŠŸèƒ½æ¨¡å—ä½¿ç”¨ç‹¬ç«‹ Hook |
| è®°å¿†åŒ– | useMemo / useCallback ä¼˜åŒ– |
| è™šæ‹ŸåŒ– | ç”¨ä¾‹åº“å¤§åˆ—è¡¨å¯è€ƒè™‘è™šæ‹Ÿæ»šåŠ¨ |

---

## åå››ã€è°ƒè¯•æŠ€å·§

### 3D æ¨¡å‹è°ƒè¯•

1. **æŸ¥çœ‹ Mesh ç»“æ„**: æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ŒåŠ è½½æ¨¡å‹åæŸ¥çœ‹è¾“å‡º
2. **æµ‹è¯•ç‚¹å‡»æ£€æµ‹**: ç‚¹å‡»æ¨¡å‹å„éƒ¨ä½ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºçš„ Mesh åç§°
3. **è°ƒæ•´æ˜ å°„è§„åˆ™**: ä¿®æ”¹ `meshMapping.ts` ä¸­çš„ `meshPatterns`

### React è°ƒè¯•

1. **React DevTools**: æŸ¥çœ‹ç»„ä»¶æ ‘å’Œ Props
2. **Network Tab**: æ£€æŸ¥ API è°ƒç”¨
3. **Console**: æŸ¥çœ‹æ—¥å¿—è¾“å‡º

---

*æœ€åæ›´æ–°: 2025-01*
