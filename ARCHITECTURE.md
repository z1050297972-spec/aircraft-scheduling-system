# Aircraft é¡¹ç›®æ¶æ„æ–‡æ¡£

> é£æœºè°ƒåº¦æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç³»ç»Ÿ

---

## ä¸€ã€æ•´ä½“æ¶æ„

Aircraft æ˜¯ä¸€ä¸ª**å•é¡µé¢ React åº”ç”¨**ï¼Œç”¨äºé£æœºè°ƒåº¦æµ‹è¯•ç”¨ä¾‹çš„æ™ºèƒ½ç”Ÿæˆã€ç®¡ç†å’Œ 3D å¯è§†åŒ–ã€‚

### æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           App.tsx                                â”‚
â”‚                    (AppProvider åŒ…è£…)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      MainLayout                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚ Sidebar  â”‚  â”‚              å†…å®¹åŒºåŸŸ                    â”‚   â”‚â”‚
â”‚  â”‚  â”‚          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚â”‚
â”‚  â”‚  â”‚ æ€åŠ¿ç›‘æ§ â”‚  â”‚  â”‚ Dashboard / Generator / Library /  â”‚â”‚   â”‚â”‚
â”‚  â”‚  â”‚ æ™ºèƒ½ç”Ÿæˆ â”‚  â”‚  â”‚ ModelViewer (3D)                   â”‚â”‚   â”‚â”‚
â”‚  â”‚  â”‚ ç”¨ä¾‹åº“   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚â”‚
â”‚  â”‚  â”‚ 3D æ¨¡å‹  â”‚  â”‚                                        â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| **æ€åŠ¿ç›‘æ§** | é£æœºçŠ¶æ€ç½‘æ ¼å±•ç¤º |
| **æ™ºèƒ½ç”Ÿæˆ** | AI é©±åŠ¨çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ |
| **ç”¨ä¾‹åº“** | æµ‹è¯•ç”¨ä¾‹ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ |
| **3D æ¨¡å‹** | é£æœº 3D å¯è§†åŒ–ä¸æ•…éšœæ£€æµ‹ |

---

## äºŒã€æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| **æ¡†æ¶** | React | 18.3.x |
| **è¯­è¨€** | TypeScript | 5.7.x |
| **æ„å»ºå·¥å…·** | Vite | 6.x |
| **æ ·å¼** | Tailwind CSS | 3.x |
| **UI å›¾æ ‡** | lucide-react | latest |
| **å›¾è¡¨** | recharts | latest |

### 3D æ¸²æŸ“

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| **3D æ¡†æ¶** | React Three Fiber | 8.x |
| **3D å·¥å…·åº“** | @react-three/drei | 9.x |
| **3D å¼•æ“** | Three.js | 0.169.x |
| **æ¨¡å‹æ ¼å¼** | glTF 2.0 / GLB | - |

### ä»£ç è´¨é‡

| ç±»åˆ« | æŠ€æœ¯ |
|------|------|
| **Linting** | ESLint |
| **Formatting** | Prettier |
| **Git Hooks** | Husky + lint-staged |

**å¼€å‘æœåŠ¡å™¨ç«¯å£:** 3000

---

## ä¸‰ã€ç›®å½•ç»“æ„

```
aircraft/
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ models/                   # 3D æ¨¡å‹æ–‡ä»¶
â”‚       â”œâ”€â”€ boeing-737/scene.glb
â”‚       â”œâ”€â”€ airbus-a320/scene.glb
â”‚       â””â”€â”€ generic-airliner/scene.glb
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ main.tsx                  # åº”ç”¨å…¥å£
    â”œâ”€â”€ App.tsx                   # æ ¹ç»„ä»¶
    â”‚
    â”œâ”€â”€ components/               # å…¨å±€å…±äº«ç»„ä»¶
    â”‚   â””â”€â”€ AircraftDetailModal.tsx
    â”‚
    â”œâ”€â”€ layouts/                  # å¸ƒå±€ç»„ä»¶
    â”‚   â””â”€â”€ MainLayout.tsx        # ä¸»å¸ƒå±€ï¼ˆä¾§è¾¹æ +å†…å®¹ï¼‰
    â”‚
    â”œâ”€â”€ features/                 # åŠŸèƒ½æ¨¡å—
    â”‚   â”œâ”€â”€ dashboard/            # æ€åŠ¿ç›‘æ§
    â”‚   â”‚   â”œâ”€â”€ AircraftGrid.tsx
    â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
    â”‚   â”‚   â”œâ”€â”€ MobileDrawer.tsx
    â”‚   â”‚   â””â”€â”€ LoginView.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ generator/            # æ™ºèƒ½ç”Ÿæˆ
    â”‚   â”‚   â”œâ”€â”€ TestCaseGenerator.tsx
    â”‚   â”‚   â””â”€â”€ components/
    â”‚   â”‚       â”œâ”€â”€ GeneratorInputPanel.tsx
    â”‚   â”‚       â””â”€â”€ GeneratorResultPanel.tsx
    â”‚   â”‚
    â”‚   â”œâ”€â”€ library/              # ç”¨ä¾‹åº“
    â”‚   â”‚   â”œâ”€â”€ TestCaseLibrary.tsx
    â”‚   â”‚   â”œâ”€â”€ hooks/
    â”‚   â”‚   â”‚   â””â”€â”€ useCaseModal.ts
    â”‚   â”‚   â””â”€â”€ components/
    â”‚   â”‚       â”œâ”€â”€ LibraryHeader.tsx
    â”‚   â”‚       â”œâ”€â”€ CaseCard.tsx
    â”‚   â”‚       â””â”€â”€ CaseModals.tsx
    â”‚   â”‚
    â”‚   â””â”€â”€ model-viewer/         # 3D æ¨¡å‹æŸ¥çœ‹å™¨ â­
    â”‚       â”œâ”€â”€ index.ts
    â”‚       â”œâ”€â”€ ModelViewerPage.tsx
    â”‚       â”œâ”€â”€ components/
    â”‚       â”‚   â”œâ”€â”€ AircraftScene.tsx
    â”‚       â”‚   â”œâ”€â”€ AircraftModel.tsx
    â”‚       â”‚   â”œâ”€â”€ MeshOverlay.tsx
    â”‚       â”‚   â”œâ”€â”€ ModelSelector.tsx
    â”‚       â”‚   â”œâ”€â”€ PartInfoPanel.tsx
    â”‚       â”‚   â””â”€â”€ LoadingProgress.tsx
    â”‚       â”œâ”€â”€ hooks/
    â”‚       â”‚   â”œâ”€â”€ usePartSelection.ts
    â”‚       â”‚   â””â”€â”€ usePartStatus.ts
    â”‚       â””â”€â”€ data/
    â”‚           â”œâ”€â”€ modelRegistry.ts
    â”‚           â”œâ”€â”€ meshMapping.ts
    â”‚           â””â”€â”€ mockPartStatus.ts
    â”‚
    â”œâ”€â”€ shared/                   # å…±äº«èµ„æº
    â”‚   â”œâ”€â”€ contexts/
    â”‚   â”‚   â””â”€â”€ AppContext.tsx    # å…¨å±€çŠ¶æ€
    â”‚   â”œâ”€â”€ hooks/
    â”‚   â””â”€â”€ utils/
    â”‚       â””â”€â”€ formatters.ts
    â”‚
    â”œâ”€â”€ types/                    # å…¨å±€ç±»å‹å®šä¹‰
    â”‚   â”œâ”€â”€ index.ts
    â”‚   â”œâ”€â”€ common.ts
    â”‚   â””â”€â”€ model-viewer.ts
    â”‚
    â””â”€â”€ data/                     # é™æ€/æ¨¡æ‹Ÿæ•°æ®
        â””â”€â”€ mockData.ts
```

---

## å››ã€æ•°æ®æµè®¾è®¡

### å…¨å±€çŠ¶æ€ (AppContext)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AppContext                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   è§†å›¾çŠ¶æ€    â”‚  â”‚   è®¤è¯çŠ¶æ€    â”‚  â”‚     ç”¨ä¾‹çŠ¶æ€          â”‚  â”‚
â”‚  â”‚  view        â”‚  â”‚  username    â”‚  â”‚  savedCases          â”‚  â”‚
â”‚  â”‚  setView     â”‚  â”‚  password    â”‚  â”‚  saveTestCase        â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  login       â”‚  â”‚  deleteTestCase      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  logout      â”‚  â”‚  updateTestCase      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MainLayout    â”‚
                    â”‚   (æ¶ˆè´¹çŠ¶æ€)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                    â–¼                    â–¼
   Dashboard            Generator             Library
```

### 3D æ¨¡å‹æ•°æ®æµ

```
ç”¨æˆ·ç‚¹å‡»é£æœºæ¨¡å‹
       â”‚
       â–¼
AircraftModel.handleClick(event)
       â”‚
       â–¼
event.object.name â†’ "engine_body_0003"
       â”‚
       â–¼
meshMapping.findPartByMeshName()
       â”‚
       â–¼
åŒ¹é…éƒ¨ä»¶ â†’ { id: "engine-1", name: "1å·å‘åŠ¨æœº" }
       â”‚
       â–¼
onPartClick(partId, partName)
       â”‚
       â–¼
usePartSelection.selectPart()
       â”‚
       â”œâ”€â”€â†’ æ›´æ–° selectedPartId
       â”‚
       â””â”€â”€â†’ è§¦å‘é«˜äº®æ•ˆæœ
            â”‚
            â”œâ”€â”€ é€‰ä¸­éƒ¨ä»¶: emissive å‘å…‰
            â””â”€â”€ å…¶ä»–éƒ¨ä»¶: opacity é€æ˜
```

---

## äº”ã€ç»„ä»¶èŒè´£åˆ’åˆ†

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **App** | `App.tsx` | æ ¹ç»„ä»¶ï¼ŒAppProvider åŒ…è£… |
| **AppContext** | `shared/contexts/AppContext.tsx` | å…¨å±€çŠ¶æ€ç®¡ç† |
| **MainLayout** | `layouts/MainLayout.tsx` | ä¸»å¸ƒå±€ï¼Œè§†å›¾è·¯ç”± |

### 3D æ¨¡å‹ç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **ModelViewerPage** | `model-viewer/ModelViewerPage.tsx` | é¡µé¢å®¹å™¨ï¼ŒçŠ¶æ€åè°ƒ |
| **AircraftScene** | `components/AircraftScene.tsx` | 3D åœºæ™¯ï¼ˆCanvasã€ç¯å…‰ã€æ§åˆ¶å™¨ï¼‰ |
| **AircraftModel** | `components/AircraftModel.tsx` | æ¨¡å‹åŠ è½½ã€ç‚¹å‡»æ£€æµ‹ã€é«˜äº® |
| **MeshOverlay** | `components/MeshOverlay.tsx` | çº¿æ¡†å’Œæ ‡ç­¾æ¸²æŸ“ |
| **PartInfoPanel** | `components/PartInfoPanel.tsx` | æ•…éšœä¿¡æ¯é¢æ¿ |

### 3D Hooks

| Hook | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **usePartSelection** | `hooks/usePartSelection.ts` | ç®¡ç†é€‰ä¸­éƒ¨ä»¶çŠ¶æ€ |
| **usePartStatus** | `hooks/usePartStatus.ts` | æŸ¥è¯¢éƒ¨ä»¶å¥åº·çŠ¶æ€ |

---

## å…­ã€å…³é”®æ–‡ä»¶å…³ç³»å›¾

### ä¸»åº”ç”¨

```
App.tsx
    â”‚
    â””â”€â†’ AppProvider (AppContext.tsx)
            â”‚
            â””â”€â†’ AppContent
                    â”‚
                    â”œâ”€â†’ LoginView (æœªç™»å½•)
                    â”‚
                    â””â”€â†’ MainLayout (å·²ç™»å½•)
                            â”‚
                            â”œâ”€â†’ Sidebar / MobileDrawer
                            â”‚
                            â””â”€â†’ è§†å›¾å†…å®¹
                                â”œâ”€â†’ Dashboard (AircraftGrid)
                                â”œâ”€â†’ Generator (TestCaseGenerator)
                                â”œâ”€â†’ Library (TestCaseLibrary)
                                â””â”€â†’ ModelViewer (ModelViewerPage)
```

### 3D æ¨¡å‹æ¨¡å—

```
ModelViewerPage.tsx
    â”‚
    â”œâ”€â”€ çŠ¶æ€: selectedModelId, showWireframe, showLabels
    â”œâ”€â”€ Hook: usePartSelection() â†’ selectedPartId
    â”œâ”€â”€ Hook: usePartStatus() â†’ getPartStatus
    â”‚
    â”œâ”€â†’ ModelSelector (æœºå‹é€‰æ‹©)
    â”‚
    â”œâ”€â†’ AircraftScene
    â”‚       â”‚
    â”‚       â””â”€â†’ AircraftModel
    â”‚               â”‚
    â”‚               â”œâ”€â”€ useGLTF(modelPath) â†’ åŠ è½½ GLB
    â”‚               â”œâ”€â”€ handleClick() â†’ Mesh æ£€æµ‹
    â”‚               â”œâ”€â”€ é«˜äº®æ•ˆæœ â†’ emissive/opacity
    â”‚               â”‚
    â”‚               â””â”€â†’ MeshOverlay
    â”‚                       â”œâ”€â”€ çº¿æ¡†: EdgesGeometry
    â”‚                       â””â”€â”€ æ ‡ç­¾: Html ç»„ä»¶
    â”‚
    â””â”€â†’ PartInfoPanel (æ•…éšœè¯¦æƒ…)
```

---

## ä¸ƒã€3D æ¨¡å‹æŠ€æœ¯ç»†èŠ‚

### Mesh ä¸ Part çš„å…³ç³»

```
                1å·å‘åŠ¨æœº (Part)
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚
engine_body     Blades003        Cone003
  (Mesh)          (Mesh)          (Mesh)
```

### éƒ¨ä»¶æ˜ å°„é…ç½®

```typescript
// meshMapping.ts
export const PART_MAPPINGS: PartMapping[] = [
  {
    id: 'engine-1',
    name: '1å·å‘åŠ¨æœº',
    category: 'engine',
    meshPatterns: ['eng1_', 'Blades003', 'engine_body_0003', ...],
  },
  // ...18 ä¸ªéƒ¨ä»¶å®šä¹‰
];
```

### å¥åº·çŠ¶æ€é¢œè‰²

| çŠ¶æ€ | é¢œè‰² | ç”¨é€” |
|------|------|------|
| normal | ğŸŸ¢ ç»¿è‰² | æ­£å¸¸è¿è¡Œ |
| warning | ğŸŸ¡ ç¥ç€è‰² | éœ€è¦å…³æ³¨ |
| error | ğŸ”´ çº¢è‰² | éœ€è¦ç»´ä¿® |
| maintenance | ğŸ”µ è“è‰² | ç»´æŠ¤ä¸­ |

---

## å…«ã€å¼€å‘å‘½ä»¤

```bash
npm run dev       # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 3000)
npm run build     # ç”Ÿäº§æ„å»º
npm run preview   # é¢„è§ˆæ„å»ºç»“æœ
npm run lint      # ESLint æ£€æŸ¥
npm run lint:fix  # ESLint è‡ªåŠ¨ä¿®å¤
npm run format    # Prettier æ ¼å¼åŒ–
npm run typecheck # TypeScript ç±»å‹æ£€æŸ¥
```

---

*æœ€åæ›´æ–°: 2025-01*
